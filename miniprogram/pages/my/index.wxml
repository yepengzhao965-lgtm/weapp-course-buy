<view class="my-page" style="padding:32rpx">
  <block wx:if="{{!user}}">
    <view class="login-card" style="background:#fff;border-radius:16rpx;padding:24rpx;box-shadow:0 8rpx 24rpx rgba(0,0,0,.06)">
      <view class="login-title" style="font-size:32rpx;margin-bottom:16rpx">微信手机号登录</view>
      <view class="login-desc" style="color:#666;margin-bottom:24rpx">点击按钮进行手机号快速验证</view>
      <button class="login-btn"
              open-type="getPhoneNumber"
              bindgetphonenumber="onQuickPhone"
              loading="{{busy}}"
              disabled="{{busy}}">微信验证登录</button>
      <view style="font-size:24rpx;color:#999;margin-top:16rpx">若提示无权限，会先打开隐私协议；同意后请再点一次。</view>
    </view>
  </block>

  <block wx:else>
    <view class="profile-bar" style="display:flex;align-items:center;gap:16rpx">
      <image style="width:96rpx;height:96rpx;border-radius:50%" src="{{user.avatarUrl || '/images/avatar-default.png'}}" />
      <view>
        <view style="font-size:32rpx">{{user.nickName || '微信用户'}}</view>
        <view style="font-size:28rpx;color:#666" wx:if="{{user.mobile}}">{{user.mobile}}</view>
      </view>
    </view>
  </block>
</view>
